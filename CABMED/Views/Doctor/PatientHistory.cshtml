@model CABMED.ViewModels.DoctorPatientHistoryViewModel
@{
    ViewBag.Title = "Historique médical";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container" style="margin-top:30px; max-width:950px;">
    <h2>Historique médical du patient</h2>
    <p class="text-muted">Vue d'ensemble de l'historique médical pour ce patient.</p>

    <div class="panel panel-default">
        <div class="panel-heading">
            <strong>@Model.PatientName</strong>
        </div>
        <div class="panel-body">
            <p><strong>ID patient :</strong> @Model.PatientId</p>
            @if (Model.DateNaissance.HasValue)
            {
                <p><strong>Date de naissance :</strong> @Model.DateNaissance.Value.ToString("dd/MM/yyyy")</p>
            }
        </div>
    </div>

    @if (Model.HistoryItems != null && Model.HistoryItems.Any())
    {
        <div class="panel panel-default">
            <div class="panel-heading">
                <strong>Historique</strong>
            </div>
            <div class="panel-body">
                <ul class="list-group">
                    @foreach (var item in Model.HistoryItems)
                    {
                        <li class="list-group-item">
                            <div class="row">
                                <div class="col-sm-2">
                                    <strong>@item.Date.ToString("dd/MM/yyyy")</strong>
                                </div>
                                <div class="col-sm-2">
                                    <span class="label label-default">@item.Type</span>
                                </div>
                                <div class="col-sm-8">
                                    @item.Summary
                                </div>
                            </div>
                        </li>
                    }
                </ul>
            </div>
        </div>
    }
    else
    {
        <div class="alert alert-info">
            <span class="glyphicon glyphicon-info-sign"></span> Aucun élément d'historique pour ce patient.
        </div>
    }

    <div class="text-right" style="margin-top:15px;">
        <a href="@Url.Action("SearchPatientHistory", "Doctor")" class="btn btn-default">
            <span class="glyphicon glyphicon-arrow-left"></span> Retour à la recherche
        </a>
    </div>
</div>
