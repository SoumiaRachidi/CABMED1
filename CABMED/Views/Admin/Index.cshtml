@{
    ViewBag.Title = "Tableau de bord Admin";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<style>
    /* Unified Professional Admin Theme */
    :root {
        --admin-primary: #1e40af;
  --admin-primary-dark: #1e3a8a;
        --admin-primary-light: #3b82f6;
     --admin-accent: #60a5fa;
        --admin-success: #10b981;
        --admin-warning: #f59e0b;
   --admin-danger: #ef4444;
        --white: #ffffff;
 --gray-50: #f8fafc;
        --gray-100: #f1f5f9;
        --gray-200: #e2e8f0;
   --gray-300: #cbd5e1;
 --gray-600: #475569;
        --gray-700: #334155;
        --gray-900: #0f172a;
        --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
     --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.15);
    }

 body {
        background: var(--gray-50);
   font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
 }

    .admin-dashboard {
        background: transparent;
 padding: 0;
    }

    /* Header Section */
    .dashboard-header {
        background: linear-gradient(135deg, var(--admin-primary) 0%, var(--admin-primary-dark) 100%);
        color: white;
        padding: 45px 40px;
        border-radius: 16px;
        margin-bottom: 30px;
   box-shadow: var(--shadow-xl);
    position: relative;
        overflow: hidden;
    }

    .dashboard-header::before {
        content: '';
        position: absolute;
        top: -50%;
   right: -10%;
    width: 400px;
        height: 400px;
        background: rgba(255, 255, 255, 0.08);
        border-radius: 50%;
        z-index: 0;
 }

    .dashboard-header .content {
        position: relative;
  z-index: 1;
    }

    .dashboard-header h2 {
        margin: 0 0 10px 0;
        font-size: 32px;
  font-weight: 700;
    }

    .dashboard-header .subtitle {
        opacity: 0.95;
        font-size: 16px;
        margin: 0;
    }

    /* Quick Actions */
    .quick-actions-bar {
        display: flex;
 gap: 12px;
        flex-wrap: wrap;
      margin-top: 24px;
    }

    .quick-actions-bar .btn {
    border-radius: 10px;
        padding: 12px 20px;
        font-weight: 600;
        font-size: 14px;
     border: none;
    transition: all 0.3s ease;
        display: inline-flex;
        align-items: center;
      gap: 8px;
     box-shadow: var(--shadow);
    }

    .quick-actions-bar .btn:hover {
 transform: translateY(-2px);
     box-shadow: var(--shadow-lg);
    }

 .btn-primary-admin {
        background: var(--admin-primary);
        color: white;
    }

    .btn-primary-admin:hover {
        background: var(--admin-primary-dark);
        color: white;
 }

    .btn-success-admin {
        background: var(--admin-success);
      color: white;
    }

    .btn-success-admin:hover {
   background: #059669;
     color: white;
    }

    .btn-warning-admin {
        background: var(--admin-warning);
      color: white;
    }

    .btn-warning-admin:hover {
        background: #d97706;
     color: white;
    }

.btn-light-admin {
        background: white;
  color: var(--admin-primary);
    border: 2px solid var(--gray-200);
    }

    .btn-light-admin:hover {
        background: var(--gray-50);
     border-color: var(--admin-primary);
        color: var(--admin-primary-dark);
    }

    /* Metrics Cards */
    .metrics-grid {
      display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 24px;
        margin-bottom: 30px;
    }

    .metric-card {
     background: white;
        border-radius: 16px;
        padding: 28px;
        box-shadow: var(--shadow);
  border: 1px solid var(--gray-200);
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
    }

    .metric-card::before {
        content: '';
  position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, var(--admin-primary), var(--admin-primary-light));
    }

    .metric-card:hover {
        transform: translateY(-4px);
 box-shadow: var(--shadow-xl);
        border-color: var(--admin-primary-light);
    }

    .metric-card.success::before {
        background: linear-gradient(90deg, var(--admin-success), #34d399);
    }

    .metric-card.warning::before {
 background: linear-gradient(90deg, var(--admin-warning), #fbbf24);
 }

    .metric-content {
        display: flex;
      align-items: flex-start;
    gap: 16px;
    }

    .metric-icon {
        width: 56px;
      height: 56px;
        display: flex;
        align-items: center;
  justify-content: center;
        border-radius: 12px;
        font-size: 24px;
        flex-shrink: 0;
    }

    .metric-icon.primary {
        background: linear-gradient(135deg, var(--admin-primary), var(--admin-primary-light));
        color: white;
    }

    .metric-icon.success {
        background: linear-gradient(135deg, var(--admin-success), #34d399);
        color: white;
    }

    .metric-icon.warning {
        background: linear-gradient(135deg, var(--admin-warning), #fbbf24);
  color: white;
    }

    .metric-info {
        flex: 1;
    }

    .metric-value {
        font-size: 36px;
      font-weight: 700;
        line-height: 1;
   margin-bottom: 8px;
        color: var(--gray-900);
 }

    .metric-label {
        color: var(--gray-600);
    font-size: 14px;
     font-weight: 500;
        margin-bottom: 12px;
    }

    .metric-link {
        color: var(--admin-primary);
        font-size: 13px;
        font-weight: 600;
  text-decoration: none;
    display: inline-flex;
      align-items: center;
        gap: 4px;
   transition: all 0.2s ease;
    }

    .metric-link:hover {
        color: var(--admin-primary-dark);
        gap: 8px;
    }

    /* Action Cards Grid */
    .action-cards-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
   gap: 24px;
    }

    .action-card {
      background: white;
    border-radius: 16px;
        padding: 28px;
    box-shadow: var(--shadow);
     border: 1px solid var(--gray-200);
        transition: all 0.3s ease;
    }

    .action-card:hover {
        box-shadow: var(--shadow-lg);
        border-color: var(--admin-primary-light);
    }

    .action-card h4 {
    margin: 0 0 12px 0;
        font-size: 18px;
   font-weight: 700;
        color: var(--gray-900);
  }

    .action-card p {
color: var(--gray-600);
   font-size: 14px;
    line-height: 1.6;
        margin-bottom: 20px;
    }

    .action-card .btn-group {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
    }

    .action-card .btn {
        border-radius: 10px;
        padding: 10px 16px;
        font-weight: 600;
        font-size: 13px;
        transition: all 0.3s ease;
   display: inline-flex;
        align-items: center;
        gap: 6px;
    }

    /* Responsive */
    @@media (max-width: 768px) {
        .dashboard-header {
            padding: 30px 20px;
        }

        .dashboard-header h2 {
     font-size: 24px;
 }

        .quick-actions-bar {
   flex-direction: column;
     }

        .quick-actions-bar .btn {
       width: 100%;
    justify-content: center;
        }

        .metrics-grid {
            grid-template-columns: 1fr;
   }

 .action-cards-grid {
         grid-template-columns: 1fr;
        }
  }
</style>

<div class="container admin-dashboard" style="margin-top: 30px; max-width: 1400px;">
    <!-- Header -->
    <div class="dashboard-header">
        <div class="content">
       <h2><span class="glyphicon glyphicon-dashboard"></span> Tableau de bord administrateur</h2>
  <p class="subtitle">Bienvenue, <strong>@Session["UserName"]</strong> • Gérez votre cabinet médical</p>
            
     <div class="quick-actions-bar">
       <a href="@Url.Action("CreateStaff", "Admin")" class="btn btn-primary-admin">
         <span class="glyphicon glyphicon-plus"></span> Ajouter un employé
   </a>
     <a href="@Url.Action("StaffList", "Admin")" class="btn btn-success-admin">
<span class="glyphicon glyphicon-list-alt"></span> Gérer le personnel
        </a>
          <a href="@Url.Action("PatientsList", "Admin")" class="btn btn-warning-admin">
              <span class="glyphicon glyphicon-user"></span> Liste des patients
    </a>
   <a href="@Url.Action("Logout", "Auth")" class="btn btn-light-admin">
         <span class="glyphicon glyphicon-log-out"></span> Déconnexion
           </a>
        </div>
   </div>
    </div>

    <!-- Metrics Cards -->
    <div class="metrics-grid">
    <div class="metric-card">
    <div class="metric-content">
         <div class="metric-icon primary">
       <span class="glyphicon glyphicon-plus-sign"></span>
</div>
                <div class="metric-info">
      <div class="metric-value">@ViewBag.TotalDoctors</div>
            <div class="metric-label">Médecins actifs</div>
        <a href="@Url.Action("StaffList", "Admin")" class="metric-link">
   Voir détails <span class="glyphicon glyphicon-arrow-right" style="font-size: 10px;"></span>
            </a>
                </div>
  </div>
        </div>

        <div class="metric-card success">
     <div class="metric-content">
     <div class="metric-icon success">
     <span class="glyphicon glyphicon-briefcase"></span>
            </div>
          <div class="metric-info">
         <div class="metric-value">@ViewBag.TotalSecretaries</div>
          <div class="metric-label">Secrétaires actives</div>
       <a href="@Url.Action("StaffList", "Admin")" class="metric-link">
           Voir détails <span class="glyphicon glyphicon-arrow-right" style="font-size: 10px;"></span>
 </a>
        </div>
      </div>
    </div>

   <div class="metric-card warning">
            <div class="metric-content">
    <div class="metric-icon warning">
    <span class="glyphicon glyphicon-heart"></span>
       </div>
    <div class="metric-info">
          <div class="metric-value">@ViewBag.TotalPatients</div>
                    <div class="metric-label">Patients enregistrés</div>
   <a href="@Url.Action("PatientsList", "Admin")" class="metric-link">
       Voir détails <span class="glyphicon glyphicon-arrow-right" style="font-size: 10px;"></span>
   </a>
             </div>
         </div>
        </div>
    </div>

    <!-- Welcome Message -->
    <div class="action-card" style="text-align: center; max-width: 800px; margin: 0 auto;">
        <h4><span class="glyphicon glyphicon-ok-circle"></span> Tableau de bord fonctionnel</h4>
        <p>Utilisez les boutons rapides ci-dessus ou les cartes métriques pour accéder aux différentes sections de gestion du cabinet médical. Tous les liens sont opérationnels et vous permettent de gérer efficacement votre personnel et vos patients.</p>
      
        <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid var(--gray-200);">
         <button type="button" class="btn btn-warning" onclick="clearTestData()" style="padding: 10px 20px;">
    <span class="glyphicon glyphicon-trash"></span> Effacer les données de test (Demandes RDV)
            </button>
        </div>
    </div>
</div>

@section Scripts {
<script>
function clearTestData() {
    if (!confirm('Êtes-vous sûr de vouloir supprimer toutes les demandes de rendez-vous de test ?')) {
        return;
    }
    
    $.ajax({
        url: '@Url.Action("ClearTestData", "Admin")',
        type: 'POST',
        data: { __RequestVerificationToken: $('input[name="__RequestVerificationToken"]').val() },
success: function(response) {
       if (response.success) {
       alert(response.message);
                location.reload();
            } else {
        alert('Erreur: ' + response.message);
         }
        },
        error: function() {
            alert('Erreur de communication avec le serveur');
        }
 });
}
</script>

@Html.AntiForgeryToken()
}
