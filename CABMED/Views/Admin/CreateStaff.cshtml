@model CABMED.ViewModels.CreateStaffViewModel

@{
    ViewBag.Title = "Créer un employé";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container" style="margin-top: 30px;">
    <div class="row">
        <div class="col-md-8 col-md-offset-2">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <h3 class="panel-title">
                        <span class="glyphicon glyphicon-user-plus"></span> Ajouter un nouvel employé
                    </h3>
                </div>
                <div class="panel-body">
                    @if (ViewBag.Error != null)
                    {
                        <div class="alert alert-danger">
                            <span class="glyphicon glyphicon-exclamation-sign"></span>
                            <strong>Erreur!</strong> @ViewBag.Error
                        </div>
                    }

                    @Html.ValidationSummary(true, "", new { @class = "alert alert-danger" })

                    @using (Html.BeginForm("CreateStaff", "Admin", FormMethod.Post, new { @class = "form-horizontal" }))
                    {
                        @Html.AntiForgeryToken()

                        <fieldset>
                            <legend>Informations personnelles</legend>

                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        @Html.LabelFor(m => m.Nom, new { @class = "control-label" })
                                        @Html.TextBoxFor(m => m.Nom, new { @class = "form-control", placeholder = "Nom de famille" })
                                        @Html.ValidationMessageFor(m => m.Nom, "", new { @class = "text-danger" })
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="form-group">
                                        @Html.LabelFor(m => m.Prenom, new { @class = "control-label" })
                                        @Html.TextBoxFor(m => m.Prenom, new { @class = "form-control", placeholder = "Prénom" })
                                        @Html.ValidationMessageFor(m => m.Prenom, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                @Html.LabelFor(m => m.Email, new { @class = "control-label" })
                                <div class="input-group">
                                    <span class="input-group-addon">
                                        <span class="glyphicon glyphicon-envelope"></span>
                                    </span>
                                    @Html.TextBoxFor(m => m.Email, new { @class = "form-control", placeholder = "exemple@email.com", type = "email" })
                                </div>
                                @Html.ValidationMessageFor(m => m.Email, "", new { @class = "text-danger" })
                            </div>

                            <div class="form-group">
                                @Html.LabelFor(m => m.Telephone, new { @class = "control-label" })
                                <div class="input-group">
                                    <span class="input-group-addon">
                                        <span class="glyphicon glyphicon-phone"></span>
                                    </span>
                                    @Html.TextBoxFor(m => m.Telephone, new { @class = "form-control", placeholder = "0612345678 (optionnel)", type = "tel" })
                                </div>
                                @Html.ValidationMessageFor(m => m.Telephone, "", new { @class = "text-danger" })
                            </div>
                        </fieldset>

                        <fieldset style="margin-top: 20px;">
                            <legend>Informations professionnelles</legend>

                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        @Html.LabelFor(m => m.Role, new { @class = "control-label" })
                                        <select name="Role" id="Role" class="form-control" required>
                                            <option value="">-- Sélectionner un rôle --</option>
                                            <option value="medecin">Médecin</option>
                                            <option value="secretaire">Secrétaire</option>
                                        </select>
                                        @Html.ValidationMessageFor(m => m.Role, "", new { @class = "text-danger" })
                                    </div>
                                </div>

                                <div class="col-md-6">
                                    <div class="form-group">
                                        @Html.LabelFor(m => m.Specialite, new { @class = "control-label" })
                                        @Html.TextBoxFor(m => m.Specialite, new { @class = "form-control", placeholder = "Ex: Cardiologue (optionnel)" })
                                        @Html.ValidationMessageFor(m => m.Specialite, "", new { @class = "text-danger" })
                                    </div>
                                </div>
                            </div>
                        </fieldset>

                        <fieldset style="margin-top: 20px;">
                            <legend>Informations de connexion</legend>

                            <div class="form-group">
                                @Html.LabelFor(m => m.Password, new { @class = "control-label" })
                                <div class="input-group">
                                    <span class="input-group-addon">
                                        <span class="glyphicon glyphicon-lock"></span>
                                    </span>
                                    @Html.PasswordFor(m => m.Password, new { @class = "form-control", placeholder = "Mot de passe (min. 6 caractères)" })
                                </div>
                                @Html.ValidationMessageFor(m => m.Password, "", new { @class = "text-danger" })
                                <p class="help-block">
                                    <small>Le mot de passe sera utilisé avec l'email pour se connecter au système.</small>
                                </p>
                            </div>
                        </fieldset>

                        <hr />

                        <div class="form-group">
                            <div class="text-center">
                                <button type="submit" class="btn btn-success btn-lg">
                                    <span class="glyphicon glyphicon-save"></span> Créer l'employé
                                </button>
                                <a href="@Url.Action("StaffList", "Admin")" class="btn btn-default btn-lg">
                                    <span class="glyphicon glyphicon-remove"></span> Annuler
                                </a>
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}
